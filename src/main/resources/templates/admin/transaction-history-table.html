<!DOCTYPE html>
<html th:replace="~{/admin/base :: dynamic(~{::main})}">

<head>
	<meta charset="ISO-8859-1">
	<title>Insert title here</title>
</head>

<body>
	<!-- partial -->
	<main class="container-fluid page-body-wrapper">
		<div class="main-panel">
			<div class="content-wrapper">
				<div class="row">
					<!-- History -->
					<div class="col-lg-12 grid-margin stretch-card">
						<div class="card">
							<div class="card-body">
								<div class="flex-title">
									<h4 class="card-title">Transaction History Table</h4>
									<form>
										<label for="search-transaction">
											<input type="hidden" name="type" th:value="${type}">
											<input id="search-transaction" type="text" name="q"
												style="background: none; border: none; border-bottom: 1px solid white; color: white;"
												placeholder="Search username...">
										</label>
										<form>
								</div>
								</p>
								<div class="tab-history">
									<!-- Tabs navs -->
									<ul class="nav nav-tabs mb-3" id="ex1" role="tablist">
										<li class="nav-item" role="presentation">
											<a class="nav-link" th:classappend="${type} == 1 ? 'active' : ''"
												id="ex1-tab-1" href="/admin/transaction-history-table?type=1">Coin
												Purchased</a>
										</li>
										<li class="nav-item" role="presentation">
											<a class="nav-link" th:classappend="${type} == 2 ? 'active' : ''"
												id="ex1-tab-2" href="/admin/transaction-history-table?type=2">Movie
												Purchased</a>
										</li>
									</ul>
									<!-- Tabs navs -->

									<!-- Tabs content -->
									<div class="tab-content p-0 text-center" id="ex1-content">
										<div class="tab-pane fade" id="ex1-tabs-1"
											th:classappend="${type} == 1 ? 'show active' : ''">
											<table class="table">
												<thead>
													<tr>
														<th scope="col">Card</th>
														<th scope="col">Coin</th>
														<th scope="col">Account</th>
														<th scope="col">Timestamp</th>
													</tr>
												</thead>
												<tbody>
													<tr th:each="c: ${coins}">
														<th>[[${c.card}]]</th>
														<td>[[${c.coin_value}]]</td>
														<td>[[${c.account.username}]]</td>
														<td>[[${#dates.format(c.timestamp, 'EEE, d MMM yyyy HH:mm a')}]]
														</td>
													</tr>
												</tbody>
											</table>
										</div>
										<div class="tab-pane fade" id="ex1-tabs-2"
											th:classappend="${type} == 2 ? 'show active' : ''">
											<table class="table">
												<thead>
													<tr>
														<th scope="col">Account</th>
														<th scope="col">Movie</th>
														<th scope="col">Timestamp</th>
													</tr>
												</thead>
												<tbody>
													<tr th:each="m: ${movies}">
														<th>[[${m.account.username}]]</th>
														<td>[[${m.movie.title}]]</td>
														<td>[[${#dates.format(m.timestamp, 'EEE, d MMM yyyy HH:mm a')}]]
														</td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
									<!-- Tabs content -->
								</div>
							</div>
							<!-- Paging -->
							<div th:replace="/utilities/paginate::.paginate"></div>
						</div>
					</div>
				</div>
			</div>
			<!-- content-wrapper ends -->
			<div th:replace="/admin/_footer.html"></div>
	</main>
</body>

</html>